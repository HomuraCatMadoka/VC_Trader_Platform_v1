# Project K-Arb æŠ€æœ¯é£é™©è¯„ä¼°ä¸åº”å¯¹æ–¹æ¡ˆ

## æ–‡æ¡£è¯´æ˜
æœ¬æ–‡æ¡£è¯†åˆ« Project K-Arb å¼€å‘å’Œè¿è¥è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„æŠ€æœ¯é£é™©ï¼Œå¹¶åˆ¶å®šç›¸åº”çš„é¢„é˜²æªæ–½å’Œåº”å¯¹æ–¹æ¡ˆã€‚

---

## é£é™©è¯„ä¼°æ¡†æ¶

### é£é™©ç­‰çº§å®šä¹‰

| ç­‰çº§ | ç¬¦å· | å½±å“èŒƒå›´ | å‘ç”Ÿæ¦‚ç‡ |
|------|------|----------|----------|
| **ä¸¥é‡** | ğŸ”´ | ç³»ç»Ÿæ— æ³•è¿è¡Œ/èµ„é‡‘æŸå¤± | ä¸­é«˜ |
| **é«˜** | ğŸŸ  | åŠŸèƒ½å—é™/æ€§èƒ½ä¸‹é™ | ä¸­ |
| **ä¸­** | ğŸŸ¡ | éƒ¨åˆ†åŠŸèƒ½å¼‚å¸¸ | ä½ä¸­ |
| **ä½** | ğŸŸ¢ | è½»å¾®å½±å“ | ä½ |

### é£é™©çŸ©é˜µ

```
å‘ç”Ÿæ¦‚ç‡
  é«˜ â”‚  ğŸŸ¡   ğŸŸ    ğŸ”´
     â”‚
  ä¸­ â”‚  ğŸŸ¢   ğŸŸ¡   ğŸŸ 
     â”‚
  ä½ â”‚  ğŸŸ¢   ğŸŸ¢   ğŸŸ¡
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        ä½   ä¸­   é«˜
          å½±å“ç¨‹åº¦
```

---

## æŠ€æœ¯é£é™©æ¸…å•

### 1. æ¶æ„ä¸è®¾è®¡é£é™©

#### ğŸ”´ R1.1: äº¤æ˜“æ‰€ API å˜æ›´

**é£é™©æè¿°**:
Upbit æˆ– Bithumb åœ¨æ²¡æœ‰é¢„å‘Šçš„æƒ…å†µä¸‹ä¿®æ”¹ API æ¥å£ï¼ˆç«¯ç‚¹ã€å‚æ•°ã€è¿”å›æ ¼å¼ã€é‰´æƒæ–¹å¼ï¼‰ï¼Œå¯¼è‡´ç³»ç»Ÿæ— æ³•æ­£å¸¸å·¥ä½œã€‚

**å½±å“**:
- REST API è¯·æ±‚å¤±è´¥ï¼Œæ— æ³•è·å–è¡Œæƒ…/ä¸‹å•
- WebSocket æ–­è¿ï¼Œæ— æ³•æ¥æ”¶å®æ—¶æ•°æ®
- è®¢å•æ— æ³•æ‰§è¡Œï¼Œé”™å¤±å¥—åˆ©æœºä¼š

**å‘ç”Ÿæ¦‚ç‡**: ä¸­ ï¼ˆéŸ©å›½äº¤æ˜“æ‰€å†å²ä¸Šæœ‰è¿‡å¤šæ¬¡ API å˜æ›´ï¼‰

**é¢„é˜²æªæ–½**:
1. **ç‰ˆæœ¬ç›‘æ§**:
   - è®¢é˜…äº¤æ˜“æ‰€å®˜æ–¹å…¬å‘Šï¼ˆTelegram/Twitterï¼‰
   - æ¯å‘¨æ£€æŸ¥ API æ–‡æ¡£æ›´æ–°
   - é…ç½® API ç‰ˆæœ¬å·ç›‘æ§ï¼ˆå¦‚æœæ”¯æŒï¼‰

2. **å…¼å®¹å±‚è®¾è®¡**:
   ```python
   # core/gateway/upbit.py
   class UpbitGateway:
       API_VERSION = "v1"  # å¯é…ç½®

       def _build_endpoint(self, path):
           return f"/{self.API_VERSION}{path}"
   ```

3. **ç°åº¦åˆ‡æ¢**:
   - åŒæ—¶æ”¯æŒæ—§ç‰ˆå’Œæ–°ç‰ˆ API
   - ä½¿ç”¨é…ç½®å¼€å…³è¿›è¡Œç‰ˆæœ¬åˆ‡æ¢

**åº”å¯¹æ–¹æ¡ˆ**:
1. **ç´§æ€¥å“åº”æµç¨‹**:
   ```
   å‘ç° API å¼‚å¸¸ â†’ ç«‹å³åœæ­¢äº¤æ˜“ â†’ åˆ†æå˜æ›´å†…å®¹ â†’ ç´§æ€¥ä¿®å¤ â†’ æµ‹è¯•éªŒè¯ â†’ æ¢å¤äº¤æ˜“
   ```

2. **å¿«é€Ÿä¿®å¤æœºåˆ¶**:
   - å‡†å¤‡çƒ­æ›´æ–°è„šæœ¬ï¼ˆæ— éœ€é‡å¯å³å¯æ›´æ–°ä»£ç ï¼‰
   - å»ºç«‹ API å­—æ®µæ˜ å°„é…ç½®æ–‡ä»¶ï¼ˆå¯åŠ¨æ€ä¿®æ”¹ï¼‰

3. **é™çº§æ–¹æ¡ˆ**:
   - å¦‚æœæŸä¸€äº¤æ˜“æ‰€ API å¤±æ•ˆï¼Œåˆ‡æ¢åˆ°ä»…ç›‘æ§æ¨¡å¼
   - ä½¿ç”¨å¤‡ç”¨äº¤æ˜“æ‰€ï¼ˆå¦‚æœæœ‰ï¼‰

**è´£ä»»äºº**: æŠ€æœ¯è´Ÿè´£äºº
**ç›‘æ§æŒ‡æ ‡**: API é”™è¯¯ç‡ > 10% è§¦å‘å‘Šè­¦

---

#### ğŸŸ  R1.2: WebSocket é¢‘ç¹æ–­çº¿

**é£é™©æè¿°**:
WebSocket è¿æ¥ä¸ç¨³å®šï¼Œé¢‘ç¹æ–­çº¿é‡è¿ï¼Œå¯¼è‡´è®¢å•ç°¿æ•°æ®ä¸è¿ç»­ï¼Œæ— æ³•å‡†ç¡®è®¡ç®—ä»·å·®ã€‚

**å½±å“**:
- è®¢å•ç°¿æ•°æ®ç¼ºå¤±
- é”™è¯¯çš„å¥—åˆ©ä¿¡å·
- æ€§èƒ½ä¸‹é™ï¼ˆé¢‘ç¹é‡è¿æ¶ˆè€—èµ„æºï¼‰

**å‘ç”Ÿæ¦‚ç‡**: ä¸­

**é¢„é˜²æªæ–½**:
1. **å¥å£®çš„é‡è¿æœºåˆ¶**:
   ```python
   class WebSocketManager:
       MAX_RECONNECT_ATTEMPTS = 10
       RECONNECT_DELAY = [1, 2, 5, 10, 30, 60]  # æŒ‡æ•°é€€é¿

       async def connect_with_retry(self):
           for attempt in range(self.MAX_RECONNECT_ATTEMPTS):
               try:
                   await self._connect()
                   return
               except Exception as e:
                   delay = self.RECONNECT_DELAY[min(attempt, len(self.RECONNECT_DELAY)-1)]
                   await asyncio.sleep(delay)
   ```

2. **å¿ƒè·³æ£€æµ‹**:
   ```python
   async def heartbeat_loop(self):
       while True:
           if time.time() - self.last_message_time > 60:
               # 60 ç§’æ— æ¶ˆæ¯ï¼Œä¸»åŠ¨é‡è¿
               await self.reconnect()
           await asyncio.sleep(10)
   ```

3. **æ•°æ®å®Œæ•´æ€§æ ¡éªŒ**:
   ```python
   def validate_sequence(self, new_seq):
       if new_seq != self.last_seq + 1:
           # åºåˆ—å·ä¸è¿ç»­ï¼Œé‡æ–°æ‹‰å–å¿«ç…§
           await self.resync()
   ```

**åº”å¯¹æ–¹æ¡ˆ**:
1. **å®æ—¶ç›‘æ§**:
   - ç›‘æ§æ–­çº¿é¢‘ç‡ï¼ˆæ¯å°æ—¶ > 5 æ¬¡è§¦å‘å‘Šè­¦ï¼‰
   - ç›‘æ§é‡è¿æˆåŠŸç‡

2. **ç½‘ç»œä¼˜åŒ–**:
   - ä½¿ç”¨ AWS Seoul åŒºåŸŸï¼Œæœ€æ¥è¿‘éŸ©å›½
   - å¯ç”¨ TCP Keep-Alive
   - ä½¿ç”¨ Enhanced Networkingï¼ˆEC2ï¼‰

3. **é™çº§æ–¹æ¡ˆ**:
   - WebSocket å¤±æ•ˆæ—¶ï¼Œé™çº§ä¸ºè½®è¯¢æ¨¡å¼ï¼ˆæ¯ç§’æ‹‰å– REST APIï¼‰

**è´£ä»»äºº**: å¼€å‘è€…
**ç›‘æ§æŒ‡æ ‡**: WebSocket æ–­çº¿æ¬¡æ•°ã€é‡è¿æˆåŠŸç‡

---

#### ğŸŸ¡ R1.3: è®¢å•ç°¿æ•°æ®ä¸ä¸€è‡´

**é£é™©æè¿°**:
ç”±äºç½‘ç»œå»¶è¿Ÿã€åºåˆ—å·ä¹±åºã€å¢é‡æ›´æ–°é”™è¯¯ç­‰åŸå› ï¼Œæœ¬åœ°ç»´æŠ¤çš„è®¢å•ç°¿ä¸äº¤æ˜“æ‰€å®é™…è®¢å•ç°¿ä¸ä¸€è‡´ã€‚

**å½±å“**:
- è®¡ç®—é”™è¯¯çš„ä»·å·®
- æ‰§è¡ŒäºæŸäº¤æ˜“

**å‘ç”Ÿæ¦‚ç‡**: ä¸­

**é¢„é˜²æªæ–½**:
1. **å®šæœŸé‡åŒæ­¥**:
   ```python
   async def periodic_resync(self):
       while True:
           await asyncio.sleep(300)  # æ¯ 5 åˆ†é’Ÿ
           await self.fetch_full_snapshot()
   ```

2. **æ•°æ®æ ¡éªŒ**:
   ```python
   def validate_orderbook(self):
       # 1. ä»·æ ¼å•è°ƒæ€§æ£€æŸ¥
       assert all(self.bids[i].price > self.bids[i+1].price for i in range(len(self.bids)-1))
       assert all(self.asks[i].price < self.asks[i+1].price for i in range(len(self.asks)-1))

       # 2. ä»·å·®åˆç†æ€§æ£€æŸ¥
       spread = (self.asks[0].price - self.bids[0].price) / self.bids[0].price
       assert spread > 0 and spread < 0.1  # ä»·å·®åº”åœ¨ 0-10% ä¹‹é—´
   ```

3. **åŒæºéªŒè¯**:
   - å…³é”®äº¤æ˜“å‰ï¼Œè°ƒç”¨ REST API å†æ¬¡ç¡®è®¤ä»·æ ¼

**åº”å¯¹æ–¹æ¡ˆ**:
1. **å¼‚å¸¸æ£€æµ‹**:
   - å¦‚æœè®¡ç®—å‡ºçš„ä»·å·®å¼‚å¸¸ï¼ˆ> 5%ï¼‰ï¼Œæš‚åœäº¤æ˜“å¹¶é‡æ–°åŒæ­¥

2. **å¯¹è´¦æœºåˆ¶**:
   - æ¯ç¬”äº¤æ˜“åï¼Œè®°å½•é¢„æœŸæˆäº¤ä»·å’Œå®é™…æˆäº¤ä»·
   - å¦‚æœåå·® > 0.5%ï¼Œè§¦å‘å‘Šè­¦

**è´£ä»»äºº**: å¼€å‘è€…
**ç›‘æ§æŒ‡æ ‡**: è®¢å•ç°¿æ ¡éªŒå¤±è´¥æ¬¡æ•°

---

### 2. æ€§èƒ½é£é™©

#### ğŸŸ  R2.1: å»¶è¿Ÿè¿‡é«˜é”™å¤±å¥—åˆ©æœºä¼š

**é£é™©æè¿°**:
ç³»ç»Ÿå¤„ç†å»¶è¿Ÿè¿‡é«˜ï¼ˆè®¢å•ç°¿æ›´æ–°ã€ä¿¡å·è®¡ç®—ã€ä¸‹å•ï¼‰ï¼Œå¯¼è‡´ä»·å·®æ¶ˆå¤±å‰æ— æ³•æˆäº¤ã€‚

**å½±å“**:
- å¥—åˆ©æˆåŠŸç‡ä¸‹é™
- ç›ˆåˆ©èƒ½åŠ›ä¸‹é™

**å‘ç”Ÿæ¦‚ç‡**: ä¸­

**é¢„é˜²æªæ–½**:
1. **æ€§èƒ½ä¼˜åŒ–**:
   - ä½¿ç”¨ `msgspec` æ›¿ä»£æ ‡å‡† `json`
   - è®¢å•ç°¿ä½¿ç”¨é«˜æ•ˆæ•°æ®ç»“æ„ï¼ˆ`bisect`ï¼‰
   - çƒ­ç‚¹ä»£ç ä½¿ç”¨ Rust ä¼˜åŒ–

2. **å¹¶å‘æ‰§è¡Œ**:
   ```python
   async def execute_arbitrage(self, signal):
       # å¹¶å‘ä¸‹å•ï¼Œæœ€å°åŒ–æ—¶é—´å·®
       tasks = [
           self.upbit.place_order(...),
           self.bithumb.place_order(...)
       ]
       results = await asyncio.gather(*tasks)
   ```

3. **æ€§èƒ½ç›‘æ§**:
   ```python
   @functools.wraps
   def measure_latency(func):
       async def wrapper(*args, **kwargs):
           start = time.time()
           result = await func(*args, **kwargs)
           latency = (time.time() - start) * 1000  # ms
           metrics.record("latency", latency, tags={"function": func.__name__})
           return result
       return wrapper
   ```

**åº”å¯¹æ–¹æ¡ˆ**:
1. **æ€§èƒ½åŸºå‡†**:
   - è®¾å®šæ€§èƒ½æŒ‡æ ‡ï¼ˆè§æ¶æ„æ–‡æ¡£ï¼‰
   - å®šæœŸè¿è¡Œæ€§èƒ½æµ‹è¯•

2. **åˆ†é˜¶æ®µä¼˜åŒ–**:
   - Phase 1-2: Python å®ç°ï¼Œä¼˜å…ˆåŠŸèƒ½
   - Phase 5: Rust ä¼˜åŒ–çƒ­ç‚¹è·¯å¾„

3. **é™çº§æ–¹æ¡ˆ**:
   - å¦‚æœæ€§èƒ½ä¸è¶³ï¼Œå‡å°‘ç›‘æ§äº¤æ˜“å¯¹æ•°é‡
   - æé«˜æœ€å°åˆ©æ¶¦ç‡é˜ˆå€¼ï¼Œå‡å°‘äº¤æ˜“é¢‘ç‡

**è´£ä»»äºº**: å¼€å‘è€…
**ç›‘æ§æŒ‡æ ‡**: P99 å»¶è¿Ÿ < 50ms

---

#### ğŸŸ¡ R2.2: å†…å­˜æ³„æ¼

**é£é™©æè¿°**:
é•¿æ—¶é—´è¿è¡Œåå†…å­˜å ç”¨æŒç»­å¢é•¿ï¼Œæœ€ç»ˆå¯¼è‡´ OOMï¼ˆOut of Memoryï¼‰å´©æºƒã€‚

**å½±å“**:
- ç³»ç»Ÿå´©æºƒ
- é”™å¤±äº¤æ˜“æœºä¼š

**å‘ç”Ÿæ¦‚ç‡**: ä½ä¸­

**é¢„é˜²æªæ–½**:
1. **å†…å­˜åˆ†æ**:
   ```bash
   # ä½¿ç”¨ memory_profiler
   python -m memory_profiler main.py
   ```

2. **èµ„æºæ¸…ç†**:
   ```python
   class OrderBookManager:
       def __init__(self):
           self.old_snapshots = deque(maxlen=100)  # é™åˆ¶å†å²è®°å½•

       def cleanup(self):
           # å®šæœŸæ¸…ç†æ— ç”¨æ•°æ®
           self.old_snapshots.clear()
   ```

3. **ç›‘æ§å†…å­˜**:
   ```python
   import psutil

   async def monitor_memory():
       while True:
           memory = psutil.virtual_memory()
           if memory.percent > 80:
               logger.warning(f"High memory usage: {memory.percent}%")
           await asyncio.sleep(60)
   ```

**åº”å¯¹æ–¹æ¡ˆ**:
1. **è‡ªåŠ¨é‡å¯**:
   - é…ç½® systemd åœ¨å´©æºƒæ—¶è‡ªåŠ¨é‡å¯
   - æ¯å‘¨å®šæœŸé‡å¯ï¼ˆå‡Œæ™¨ä½å³°æœŸï¼‰

2. **å†…å­˜é™åˆ¶**:
   ```ini
   # systemd service file
   [Service]
   MemoryMax=1G
   ```

**è´£ä»»äºº**: å¼€å‘è€…
**ç›‘æ§æŒ‡æ ‡**: å†…å­˜å ç”¨è¶‹åŠ¿

---

### 3. äº¤æ˜“é£é™©

#### ğŸ”´ R3.1: è®¢å•éƒ¨åˆ†æˆäº¤

**é£é™©æè¿°**:
å¥—åˆ©è®¢å•åœ¨ä¸¤ä¸ªäº¤æ˜“æ‰€çš„æˆäº¤æƒ…å†µä¸ä¸€è‡´ï¼ˆä¸€ä¸ªå®Œå…¨æˆäº¤ï¼Œå¦ä¸€ä¸ªéƒ¨åˆ†æˆäº¤æˆ–å¤±è´¥ï¼‰ï¼Œå¯¼è‡´å•è¾¹æŒä»“é£é™©ã€‚

**å½±å“**:
- èµ„é‡‘é”å®š
- æ‰¿æ‹…ä»·æ ¼æ³¢åŠ¨é£é™©
- å¯èƒ½äºæŸ

**å‘ç”Ÿæ¦‚ç‡**: ä¸­

**é¢„é˜²æªæ–½**:
1. **è®¢å•çŠ¶æ€è·Ÿè¸ª**:
   ```python
   class OrderExecutor:
       async def execute_arbitrage(self, signal):
           results = await asyncio.gather(*tasks, return_exceptions=True)

           # æ£€æŸ¥æ˜¯å¦å…¨éƒ¨æˆåŠŸ
           if not all(r.status == 'filled' for r in results):
               await self.handle_partial_failure(results)
   ```

2. **è¶…æ—¶å–æ¶ˆ**:
   ```python
   async def wait_for_fill(self, order_id, timeout=10):
       start = time.time()
       while time.time() - start < timeout:
           status = await self.get_order_status(order_id)
           if status == 'filled':
               return True
           await asyncio.sleep(0.5)

       # è¶…æ—¶ï¼Œå–æ¶ˆè®¢å•
       await self.cancel_order(order_id)
       return False
   ```

3. **å¸‚ä»·å•ä¼˜å…ˆ**:
   - ä½¿ç”¨å¸‚ä»·å•ç¡®ä¿æˆäº¤ï¼ˆä½†éœ€æ‰¿å—æ»‘ç‚¹ï¼‰
   - ä»…åœ¨æµåŠ¨æ€§å……è¶³æ—¶ä½¿ç”¨é™ä»·å•

**åº”å¯¹æ–¹æ¡ˆ**:
1. **éƒ¨åˆ†å¤±è´¥å¤„ç†**:
   ```python
   async def handle_partial_failure(self, results):
       filled_orders = [r for r in results if r.status == 'filled']
       failed_orders = [r for r in results if isinstance(r, Exception)]

       if filled_orders:
           # å°è¯•å–æ¶ˆå·²æˆäº¤çš„è®¢å•ï¼ˆå¦‚æœè¿˜åœ¨æŒ‚å•çŠ¶æ€ï¼‰
           # æˆ–è€…ç«‹å³æ‰§è¡Œåå‘å¯¹å†²äº¤æ˜“
           await self.emergency_hedge(filled_orders)

       # è®°å½•æ—¥å¿—å’Œå‘Šè­¦
       logger.error(f"Partial failure: {len(failed_orders)} orders failed")
   ```

2. **å¯¹å†²ç­–ç•¥**:
   - å¦‚æœ Upbit å–å‡ºæˆåŠŸä½† Bithumb ä¹°å…¥å¤±è´¥
   - ç«‹å³åœ¨ Upbit ä¹°å›ï¼ˆå¯èƒ½å°å¹…äºæŸï¼‰

**è´£ä»»äºº**: æŠ€æœ¯è´Ÿè´£äºº
**ç›‘æ§æŒ‡æ ‡**: è®¢å•æˆåŠŸç‡ã€å•è¾¹æŒä»“æ¬¡æ•°

---

#### ğŸ”´ R3.2: æ»‘ç‚¹è¿‡å¤§

**é£é™©æè¿°**:
ä½¿ç”¨å¸‚ä»·å•æ—¶ï¼Œå®é™…æˆäº¤ä»·æ ¼ä¸é¢„æœŸä»·æ ¼åå·®è¿‡å¤§ï¼Œå¯¼è‡´å¥—åˆ©åˆ©æ¶¦æ¶ˆå¤±æˆ–äºæŸã€‚

**å½±å“**:
- é¢„æœŸåˆ©æ¶¦ 0.5%ï¼Œå®é™…æ»‘ç‚¹ 0.6%ï¼Œå¯¼è‡´äºæŸ

**å‘ç”Ÿæ¦‚ç‡**: ä¸­

**é¢„é˜²æªæ–½**:
1. **æµåŠ¨æ€§æ£€æŸ¥**:
   ```python
   def check_liquidity(self, orderbook, required_volume):
       total_volume = sum(level.quantity for level in orderbook.bids[:10])
       if required_volume > total_volume * 0.1:
           # éœ€è¦çš„é‡è¶…è¿‡å‰ 10 æ¡£æ€»é‡çš„ 10%ï¼ŒæµåŠ¨æ€§ä¸è¶³
           return False
       return True
   ```

2. **æ»‘ç‚¹ä¼°ç®—**:
   ```python
   def estimate_slippage(self, orderbook, volume):
       cumulative_volume = 0
       weighted_price = 0

       for level in orderbook.asks:
           if cumulative_volume >= volume:
               break
           fill_volume = min(level.quantity, volume - cumulative_volume)
           weighted_price += level.price * fill_volume
           cumulative_volume += fill_volume

       avg_price = weighted_price / cumulative_volume
       slippage = (avg_price - orderbook.asks[0].price) / orderbook.asks[0].price
       return slippage
   ```

3. **åŠ¨æ€è°ƒæ•´äº¤æ˜“é‡**:
   ```python
   def calculate_safe_volume(self, orderbook, max_slippage=0.001):
       # è®¡ç®—åœ¨å¯æ¥å—æ»‘ç‚¹å†…çš„æœ€å¤§äº¤æ˜“é‡
       ...
   ```

**åº”å¯¹æ–¹æ¡ˆ**:
1. **é™åˆ¶å•ç¬”äº¤æ˜“é‡**:
   - é»˜è®¤æœ€å¤§ 0.1 BTC
   - æ ¹æ®æµåŠ¨æ€§åŠ¨æ€è°ƒæ•´

2. **æ»‘ç‚¹å¯¹è´¦**:
   - æ¯ç¬”äº¤æ˜“è®°å½•é¢„æœŸä»·æ ¼å’Œå®é™…ä»·æ ¼
   - å¦‚æœåå·® > 0.5%ï¼Œè§¦å‘å‘Šè­¦å¹¶æš‚åœäº¤æ˜“

**è´£ä»»äºº**: å¼€å‘è€…
**ç›‘æ§æŒ‡æ ‡**: å®é™…æ»‘ç‚¹ vs é¢„æœŸæ»‘ç‚¹

---

#### ğŸŸ  R3.3: ä½™é¢ä¸è¶³

**é£é™©æè¿°**:
ç”±äºè´¦æˆ·ä½™é¢è®¡ç®—é”™è¯¯ã€å¹¶å‘äº¤æ˜“ã€èµ„é‡‘æœªåŠæ—¶åˆ°è´¦ç­‰åŸå› ï¼Œå¯¼è‡´ä¸‹å•æ—¶ä½™é¢ä¸è¶³ã€‚

**å½±å“**:
- è®¢å•å¤±è´¥
- é”™å¤±å¥—åˆ©æœºä¼š

**å‘ç”Ÿæ¦‚ç‡**: ä¸­

**é¢„é˜²æªæ–½**:
1. **ä½™é¢é¢„ç•™**:
   ```python
   class BalanceChecker:
       RESERVE_RATIO = 0.05  # é¢„ç•™ 5%

       def check_available(self, currency, required):
           available = self.get_balance(currency)
           safe_available = available * (1 - self.RESERVE_RATIO)
           return required <= safe_available
   ```

2. **ä½™é¢é”å®š**:
   ```python
   class BalanceManager:
       def __init__(self):
           self.locked = defaultdict(float)

       async def lock(self, currency, amount):
           # é”å®šä½™é¢ï¼Œé˜²æ­¢å¹¶å‘äº¤æ˜“è¶…ç”¨
           self.locked[currency] += amount

       async def unlock(self, currency, amount):
           self.locked[currency] -= amount

       def get_available(self, currency):
           total = self.get_total_balance(currency)
           return total - self.locked[currency]
   ```

3. **å®æ—¶åŒæ­¥**:
   - æ¯æ¬¡äº¤æ˜“å‰è°ƒç”¨ API è·å–æœ€æ–°ä½™é¢
   - æ¯æ¬¡äº¤æ˜“åæ›´æ–°æœ¬åœ°ä½™é¢ç¼“å­˜

**åº”å¯¹æ–¹æ¡ˆ**:
1. **é™çº§è¿è¡Œ**:
   - å½“ä½™é¢ä½äºé˜ˆå€¼æ—¶ï¼Œé™ä½äº¤æ˜“é‡
   - å‘é€å‘Šè­¦é€šçŸ¥äººå·¥å……å€¼

2. **è‡ªåŠ¨å¹³è¡¡ï¼ˆæœªæ¥ï¼‰**:
   - æ£€æµ‹åˆ°ä¸¤ä¸ªäº¤æ˜“æ‰€ BTC æˆ– KRW åˆ†å¸ƒä¸å‡æ—¶
   - é€šè¿‡ç°è´§äº¤æ˜“é‡æ–°å¹³è¡¡ï¼ˆéè·¨äº¤æ˜“æ‰€è½¬è´¦ï¼‰

**è´£ä»»äºº**: å¼€å‘è€…
**ç›‘æ§æŒ‡æ ‡**: å¯ç”¨ä½™é¢ã€ä½™é¢ä¸è¶³æ¬¡æ•°

---

### 4. ç³»ç»Ÿè¿ç»´é£é™©

#### ğŸŸ  R4.1: æœåŠ¡å™¨å®•æœº

**é£é™©æè¿°**:
EC2 å®ä¾‹æ•…éšœã€ç½‘ç»œä¸­æ–­ã€äº‘æœåŠ¡å•†æ•…éšœç­‰å¯¼è‡´ç³»ç»Ÿæ— æ³•è¿è¡Œã€‚

**å½±å“**:
- æ— æ³•äº¤æ˜“
- é”™å¤±å¥—åˆ©æœºä¼š

**å‘ç”Ÿæ¦‚ç‡**: ä½

**é¢„é˜²æªæ–½**:
1. **å¥åº·æ£€æŸ¥**:
   ```python
   async def healthcheck():
       # æ£€æŸ¥å…³é”®ç»„ä»¶çŠ¶æ€
       checks = {
           "upbit_ws": upbit_manager.is_connected(),
           "bithumb_ws": bithumb_manager.is_connected(),
           "orderbook": orderbook_manager.is_healthy(),
       }
       return all(checks.values())
   ```

2. **è‡ªåŠ¨é‡å¯**:
   ```ini
   # systemd service
   [Service]
   Restart=always
   RestartSec=10
   ```

3. **ç›‘æ§å‘Šè­¦**:
   - CloudWatch é…ç½®å®ä¾‹çŠ¶æ€ç›‘æ§
   - æœåŠ¡åœæ­¢è¶…è¿‡ 1 åˆ†é’Ÿå‘é€å‘Šè­¦

**åº”å¯¹æ–¹æ¡ˆ**:
1. **å¿«é€Ÿæ¢å¤**:
   - è‡ªåŠ¨é‡å¯ï¼ˆsystemdï¼‰
   - å‡†å¤‡å¤‡ç”¨ EC2 å®ä¾‹ï¼ˆæ‰‹åŠ¨åˆ‡æ¢ï¼‰

2. **å¤šåŒºåŸŸéƒ¨ç½²ï¼ˆæœªæ¥ï¼‰**:
   - ä¸»å®ä¾‹ï¼šAWS Seoul
   - å¤‡ç”¨å®ä¾‹ï¼šAWS Tokyo
   - ä½¿ç”¨ Elastic IP å¿«é€Ÿåˆ‡æ¢

**è´£ä»»äºº**: DevOps
**ç›‘æ§æŒ‡æ ‡**: æœåŠ¡å¯ç”¨æ€§ï¼ˆUptimeï¼‰

---

#### ğŸŸ¡ R4.2: é…ç½®é”™è¯¯

**é£é™©æè¿°**:
é…ç½®æ–‡ä»¶é”™è¯¯ï¼ˆAPI Keyã€å‚æ•°ã€é˜ˆå€¼ç­‰ï¼‰ï¼Œå¯¼è‡´ç³»ç»Ÿå¼‚å¸¸æˆ–äºæŸã€‚

**å½±å“**:
- æ— æ³•è¿æ¥äº¤æ˜“æ‰€
- é”™è¯¯çš„äº¤æ˜“å‚æ•°
- å¯èƒ½äºæŸ

**å‘ç”Ÿæ¦‚ç‡**: ä½

**é¢„é˜²æªæ–½**:
1. **é…ç½®æ ¡éªŒ**:
   ```python
   class Config:
       def validate(self):
           assert self.min_profit_rate > 0
           assert self.max_position_btc > 0
           assert len(self.upbit_api_key) > 0
           # ...

       @classmethod
       def load(cls, path):
           config = cls.from_yaml(path)
           config.validate()
           return config
   ```

2. **é…ç½®ç‰ˆæœ¬æ§åˆ¶**:
   - æ‰€æœ‰é…ç½®æ–‡ä»¶çº³å…¥ Git
   - ç”Ÿäº§é…ç½®éœ€è¦ Code Review

3. **æ•æ„Ÿä¿¡æ¯åˆ†ç¦»**:
   ```yaml
   # config/production.yaml
   api_keys: ${env:API_KEYS_PATH}  # ä»ç¯å¢ƒå˜é‡è¯»å–
   ```

**åº”å¯¹æ–¹æ¡ˆ**:
1. **DryRun éªŒè¯**:
   - æ‰€æœ‰é…ç½®å˜æ›´å…ˆåœ¨ DryRun æ¨¡å¼ä¸‹è¿è¡Œ 1 å°æ—¶
   - ç¡®è®¤æ— å¼‚å¸¸åå†åˆ‡æ¢åˆ°çœŸå®äº¤æ˜“

2. **å›æ»šæœºåˆ¶**:
   - ä¿ç•™ä¸Šä¸€ç‰ˆæœ¬é…ç½®
   - å¿«é€Ÿå›æ»šè„šæœ¬

**è´£ä»»äºº**: DevOps
**ç›‘æ§æŒ‡æ ‡**: é…ç½®å˜æ›´è®°å½•

---

### 5. å®‰å…¨é£é™©

#### ğŸ”´ R5.1: API å¯†é’¥æ³„éœ²

**é£é™©æè¿°**:
API Key å’Œ Secret è¢«æ³„éœ²ï¼ˆä»£ç æäº¤ã€æ—¥å¿—æ‰“å°ã€ç½‘ç»œæŠ“åŒ…ç­‰ï¼‰ï¼Œå¯¼è‡´è´¦æˆ·è¢«ç›—ç”¨ã€‚

**å½±å“**:
- èµ„é‡‘è¢«ç›—
- æ¶æ„äº¤æ˜“

**å‘ç”Ÿæ¦‚ç‡**: ä½

**é¢„é˜²æªæ–½**:
1. **å¯†é’¥ç®¡ç†**:
   - ä½¿ç”¨ AWS Secrets Manager
   - è¿è¡Œæ—¶ä»ç¯å¢ƒå˜é‡è¯»å–
   - æ°¸è¿œä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 

2. **æƒé™æœ€å°åŒ–**:
   - API Key ä»…æˆäºˆå¿…è¦æƒé™ï¼ˆæŸ¥è¯¢ + äº¤æ˜“ï¼‰
   - ç¦æ­¢æç°æƒé™

3. **ä»£ç å®¡æŸ¥**:
   - Git pre-commit hook æ£€æŸ¥æ•æ„Ÿä¿¡æ¯
   ```bash
   # .git/hooks/pre-commit
   if git diff --cached | grep -E 'api_key|secret_key|password'; then
       echo "Error: Sensitive information detected!"
       exit 1
   fi
   ```

**åº”å¯¹æ–¹æ¡ˆ**:
1. **ç´§æ€¥å“åº”**:
   - å‘ç°æ³„éœ²ç«‹å³ç¦ç”¨ API Key
   - ç”Ÿæˆæ–°çš„ API Key
   - æ£€æŸ¥è´¦æˆ·å¼‚å¸¸äº¤æ˜“

2. **å®šæœŸè½®æ¢**:
   - æ¯æœˆæ›´æ¢ä¸€æ¬¡ API Key

**è´£ä»»äºº**: å®‰å…¨è´Ÿè´£äºº
**ç›‘æ§æŒ‡æ ‡**: API è°ƒç”¨æ¥æº IP ç›‘æ§

---

#### ğŸŸ  R5.2: ä»£ç æ³¨å…¥æ”»å‡»

**é£é™©æè¿°**:
å¦‚æœç³»ç»Ÿæ¥å—å¤–éƒ¨è¾“å…¥ï¼ˆå¦‚ Web æ¥å£ã€é…ç½®æ–‡ä»¶ï¼‰ï¼Œå¯èƒ½é­å—ä»£ç æ³¨å…¥æ”»å‡»ã€‚

**å½±å“**:
- ç³»ç»Ÿè¢«æ§åˆ¶
- æ•°æ®æ³„éœ²

**å‘ç”Ÿæ¦‚ç‡**: ä½ï¼ˆå½“å‰æ— å¤–éƒ¨æ¥å£ï¼‰

**é¢„é˜²æªæ–½**:
1. **è¾“å…¥éªŒè¯**:
   ```python
   def validate_symbol(symbol):
       if not re.match(r'^[A-Z]{3,10}-[A-Z]{3,10}$', symbol):
           raise ValueError("Invalid symbol format")
   ```

2. **å‚æ•°åŒ–æŸ¥è¯¢**:
   - å¦‚æœæœªæ¥æ¥å…¥æ•°æ®åº“ï¼Œä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢ SQL æ³¨å…¥

3. **æœ€å°æƒé™**:
   - è¿è¡Œç¨‹åºçš„ç”¨æˆ·æƒé™æœ€å°åŒ–
   - ä¸ä½¿ç”¨ root è¿è¡Œ

**åº”å¯¹æ–¹æ¡ˆ**:
1. **å®‰å…¨å®¡è®¡**:
   - Phase 3 è¿›è¡Œå®‰å…¨ä»£ç å®¡æŸ¥
   - ä½¿ç”¨å·¥å…·ï¼ˆå¦‚ `bandit`ï¼‰æ£€æµ‹å®‰å…¨æ¼æ´

**è´£ä»»äºº**: æŠ€æœ¯è´Ÿè´£äºº
**ç›‘æ§æŒ‡æ ‡**: æ— 

---

### 6. ä¸šåŠ¡é£é™©

#### ğŸŸ¡ R6.1: ç­–ç•¥å¤±æ•ˆ

**é£é™©æè¿°**:
å¸‚åœºç¯å¢ƒå˜åŒ–ï¼ˆå¥—åˆ©æœºä¼šå‡å°‘ã€ç«äº‰åŠ å‰§ã€äº¤æ˜“æ‰€è°ƒæ•´è´¹ç‡ç­‰ï¼‰ï¼Œå¯¼è‡´ç­–ç•¥æ— æ³•ç›ˆåˆ©ã€‚

**å½±å“**:
- ç›ˆåˆ©èƒ½åŠ›ä¸‹é™
- å¯èƒ½äºæŸ

**å‘ç”Ÿæ¦‚ç‡**: ä¸­

**é¢„é˜²æªæ–½**:
1. **ç­–ç•¥ç›‘æ§**:
   ```python
   class StrategyMonitor:
       def analyze_performance(self, window_days=7):
           # åˆ†ææœ€è¿‘ 7 å¤©çš„è¡¨ç°
           trades = self.get_recent_trades(window_days)
           win_rate = sum(1 for t in trades if t.profit > 0) / len(trades)
           avg_profit = sum(t.profit for t in trades) / len(trades)

           if win_rate < 0.5 or avg_profit < 0:
               logger.warning("Strategy performance degraded!")
   ```

2. **åŠ¨æ€å‚æ•°è°ƒæ•´**:
   - æ ¹æ®å¸‚åœºæƒ…å†µè°ƒæ•´æœ€å°åˆ©æ¶¦ç‡
   - æ ¹æ®æˆåŠŸç‡è°ƒæ•´äº¤æ˜“é¢‘ç‡

**åº”å¯¹æ–¹æ¡ˆ**:
1. **äººå·¥å¹²é¢„**:
   - æ€§èƒ½ä¸‹é™è§¦å‘å‘Šè­¦
   - äººå·¥åˆ†æåŸå› å¹¶è°ƒæ•´ç­–ç•¥

2. **ç­–ç•¥å¤šæ ·åŒ–ï¼ˆæœªæ¥ï¼‰**:
   - å¼€å‘å¤šç§ç­–ç•¥ï¼ˆä¸‰è§’å¥—åˆ©ã€è·¨æœŸå¥—åˆ©ï¼‰
   - é™ä½å•ä¸€ç­–ç•¥ä¾èµ–

**è´£ä»»äºº**: ç­–ç•¥è´Ÿè´£äºº
**ç›‘æ§æŒ‡æ ‡**: 7 æ—¥èƒœç‡ã€å¹³å‡åˆ©æ¶¦

---

#### ğŸŸ¢ R6.2: æ³•å¾‹åˆè§„é£é™©

**é£é™©æè¿°**:
éŸ©å›½ç›‘ç®¡æ”¿ç­–å˜åŒ–ï¼Œå¯èƒ½å½±å“å¥—åˆ©äº¤æ˜“çš„åˆæ³•æ€§æˆ–å¯è¡Œæ€§ã€‚

**å½±å“**:
- ä¸šåŠ¡å—é™
- å¯èƒ½éœ€è¦åœæ­¢è¿è¥

**å‘ç”Ÿæ¦‚ç‡**: ä½

**é¢„é˜²æªæ–½**:
1. **åˆè§„ç ”ç©¶**:
   - äº†è§£éŸ©å›½åŠ å¯†è´§å¸ç›¸å…³æ³•å¾‹
   - å’¨è¯¢æ³•å¾‹é¡¾é—®

2. **é£é™©æŠ«éœ²**:
   - æ˜ç¡®å‘ŠçŸ¥æŠ•èµ„è€…ç›¸å…³é£é™©

**åº”å¯¹æ–¹æ¡ˆ**:
1. **åŠæ—¶è°ƒæ•´**:
   - å…³æ³¨ç›‘ç®¡åŠ¨æ€
   - å¿…è¦æ—¶è°ƒæ•´ä¸šåŠ¡æ¨¡å¼æˆ–åœæ­¢è¿è¥

**è´£ä»»äºº**: äº§å“è´Ÿè´£äºº
**ç›‘æ§æŒ‡æ ‡**: æ— 

---

## é£é™©åº”å¯¹æ€»ç»“

### å…³é”®é£é™©çŸ©é˜µ

| é£é™© ID | é£é™©æè¿° | ç­‰çº§ | é¢„é˜²æªæ–½ | åº”å¯¹æ–¹æ¡ˆ | è´£ä»»äºº |
|---------|----------|------|----------|----------|--------|
| R1.1 | API å˜æ›´ | ğŸ”´ | ç‰ˆæœ¬ç›‘æ§ã€å…¼å®¹å±‚ | ç´§æ€¥ä¿®å¤æµç¨‹ | Tech Lead |
| R1.2 | WebSocket æ–­çº¿ | ğŸŸ  | é‡è¿æœºåˆ¶ã€å¿ƒè·³ | é™çº§ä¸ºè½®è¯¢ | å¼€å‘è€… |
| R1.3 | è®¢å•ç°¿ä¸ä¸€è‡´ | ğŸŸ¡ | å®šæœŸé‡åŒæ­¥ | åŒæºéªŒè¯ | å¼€å‘è€… |
| R2.1 | å»¶è¿Ÿè¿‡é«˜ | ğŸŸ  | æ€§èƒ½ä¼˜åŒ– | Rust é‡å†™ | å¼€å‘è€… |
| R2.2 | å†…å­˜æ³„æ¼ | ğŸŸ¡ | å†…å­˜åˆ†æ | è‡ªåŠ¨é‡å¯ | å¼€å‘è€… |
| R3.1 | è®¢å•éƒ¨åˆ†æˆäº¤ | ğŸ”´ | çŠ¶æ€è·Ÿè¸ª | ç´§æ€¥å¯¹å†² | Tech Lead |
| R3.2 | æ»‘ç‚¹è¿‡å¤§ | ğŸ”´ | æµåŠ¨æ€§æ£€æŸ¥ | é™åˆ¶äº¤æ˜“é‡ | å¼€å‘è€… |
| R3.3 | ä½™é¢ä¸è¶³ | ğŸŸ  | ä½™é¢é¢„ç•™ | é™çº§è¿è¡Œ | å¼€å‘è€… |
| R4.1 | æœåŠ¡å™¨å®•æœº | ğŸŸ  | è‡ªåŠ¨é‡å¯ | å¤‡ç”¨å®ä¾‹ | DevOps |
| R4.2 | é…ç½®é”™è¯¯ | ğŸŸ¡ | é…ç½®æ ¡éªŒ | DryRun éªŒè¯ | DevOps |
| R5.1 | å¯†é’¥æ³„éœ² | ğŸ”´ | å¯†é’¥ç®¡ç† | ç´§æ€¥ç¦ç”¨ | å®‰å…¨è´Ÿè´£äºº |
| R5.2 | ä»£ç æ³¨å…¥ | ğŸŸ  | è¾“å…¥éªŒè¯ | å®‰å…¨å®¡è®¡ | Tech Lead |
| R6.1 | ç­–ç•¥å¤±æ•ˆ | ğŸŸ¡ | ç­–ç•¥ç›‘æ§ | äººå·¥å¹²é¢„ | ç­–ç•¥è´Ÿè´£äºº |
| R6.2 | æ³•å¾‹é£é™© | ğŸŸ¢ | åˆè§„ç ”ç©¶ | åŠæ—¶è°ƒæ•´ | äº§å“è´Ÿè´£äºº |

---

## æŒç»­æ”¹è¿›è®¡åˆ’

### é£é™©è¯„å®¡æœºåˆ¶

1. **æ¯å‘¨é£é™©ä¼šè®®**:
   - å›é¡¾æœ¬å‘¨å‘ç”Ÿçš„é£é™©äº‹ä»¶
   - è¯„ä¼°åº”å¯¹æªæ–½æœ‰æ•ˆæ€§
   - æ›´æ–°é£é™©è¯„çº§

2. **æ¯æœˆé£é™©æŠ¥å‘Š**:
   - æ±‡æ€»é£é™©äº‹ä»¶ç»Ÿè®¡
   - åˆ†æè¶‹åŠ¿
   - æå‡ºæ”¹è¿›å»ºè®®

3. **å­£åº¦é£é™©å®¡è®¡**:
   - å…¨é¢å®¡æŸ¥é£é™©æ¸…å•
   - è¯†åˆ«æ–°é£é™©
   - æ·˜æ±°è¿‡æ—¶é£é™©

### çŸ¥è¯†åº“å»ºè®¾

å»ºç«‹é£é™©äº‹ä»¶çŸ¥è¯†åº“ï¼š

```markdown
# é£é™©äº‹ä»¶è®°å½•æ¨¡æ¿

## äº‹ä»¶ ID: RE-2025-001

### åŸºæœ¬ä¿¡æ¯
- **å‘ç”Ÿæ—¶é—´**: 2025-12-01 10:30:00
- **é£é™©ç±»å‹**: R1.1 API å˜æ›´
- **ä¸¥é‡ç¨‹åº¦**: é«˜

### äº‹ä»¶æè¿°
Upbit åœ¨æ²¡æœ‰é¢„å‘Šçš„æƒ…å†µä¸‹å°† `/v1/accounts` ç«¯ç‚¹è¿”å›æ ¼å¼ä»æ•°ç»„æ”¹ä¸ºå¯¹è±¡...

### å½±å“èŒƒå›´
- ç³»ç»Ÿæ— æ³•è·å–ä½™é¢
- åœæ­¢äº¤æ˜“ 2 å°æ—¶

### åº”å¯¹è¿‡ç¨‹
1. 10:30 - å‘ç°å¼‚å¸¸ï¼Œè§¦å‘å‘Šè­¦
2. 10:35 - åˆ†æ API å“åº”å˜åŒ–
3. 11:00 - ä¿®å¤ä»£ç 
4. 11:30 - æµ‹è¯•é€šè¿‡
5. 12:00 - æ¢å¤äº¤æ˜“

### ç»éªŒæ•™è®­
1. åº”å»ºç«‹ API Mock å±‚ï¼Œä¾¿äºå¿«é€Ÿåˆ‡æ¢
2. åº”å¢åŠ  API å“åº”æ ¼å¼æ ¡éªŒ

### æ”¹è¿›æªæ–½
- [ ] å®ç° API Mock å±‚
- [ ] å¢åŠ è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›– API æ ¼å¼å˜æ›´

### è´£ä»»äºº
- äº‹ä»¶å¤„ç†: å¼ ä¸‰
- æ–‡æ¡£è®°å½•: æå››
```

---

## åº”æ€¥é¢„æ¡ˆ

### ç´§æ€¥è”ç³»äºº

| è§’è‰² | å§“å | è”ç³»æ–¹å¼ | å¤‡æ³¨ |
|------|------|----------|------|
| æŠ€æœ¯è´Ÿè´£äºº | XXX | +82-XXX-XXXX | 24/7 On-Call |
| å¼€å‘è€… | XXX | +82-XXX-XXXX | |
| DevOps | XXX | +82-XXX-XXXX | |

### åº”æ€¥å“åº”æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘ç°å¼‚å¸¸   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      å¦      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ˜¯å¦ä¸¥é‡ï¼Ÿ  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  è®°å½•æ—¥å¿—   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ æ˜¯
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç«‹å³åœæ­¢   â”‚
â”‚  äº¤æ˜“ç³»ç»Ÿ   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€šçŸ¥è´Ÿè´£äºº â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†æåŸå›    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ¶å®šæ–¹æ¡ˆ   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰§è¡Œä¿®å¤   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éªŒè¯æµ‹è¯•   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¢å¤äº¤æ˜“   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äº‹ååˆ†æ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åº”æ€¥è„šæœ¬

**åœæ­¢äº¤æ˜“**:
```bash
# scripts/emergency_stop.sh
#!/bin/bash
echo "EMERGENCY STOP TRIGGERED"
sudo systemctl stop k-arb
curl -X POST https://hooks.slack.com/... -d '{"text":"K-Arb Emergency Stopped"}'
```

**å¿«é€Ÿå›æ»š**:
```bash
# scripts/rollback.sh
#!/bin/bash
git checkout v1.0.0  # å›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬
sudo systemctl restart k-arb
```

---

## é™„å½•ï¼šé£é™©æ£€æŸ¥æ¸…å•

### ä¸Šçº¿å‰æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡
- [ ] æ¨¡æ‹Ÿäº¤æ˜“éªŒè¯é€šè¿‡
- [ ] API å¯†é’¥å·²å®‰å…¨å­˜å‚¨
- [ ] é…ç½®æ–‡ä»¶å·²éªŒè¯
- [ ] ç›‘æ§å’Œå‘Šè­¦å·²é…ç½®
- [ ] åº”æ€¥é¢„æ¡ˆå·²å‡†å¤‡
- [ ] å›¢é˜Ÿæˆå‘˜å·²åŸ¹è®­
- [ ] æ–‡æ¡£å·²æ›´æ–°

### æ—¥å¸¸è¿ç»´æ£€æŸ¥æ¸…å•

- [ ] æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ï¼ˆæ—  ERRORï¼‰
- [ ] æ£€æŸ¥ WebSocket è¿æ¥çŠ¶æ€
- [ ] æ£€æŸ¥è´¦æˆ·ä½™é¢
- [ ] æ£€æŸ¥è®¢å•æˆåŠŸç‡
- [ ] æ£€æŸ¥æ€§èƒ½æŒ‡æ ‡ï¼ˆå»¶è¿Ÿã€å†…å­˜ã€CPUï¼‰
- [ ] æ£€æŸ¥ç›‘æ§å‘Šè­¦
- [ ] æ£€æŸ¥äº¤æ˜“æ‰€å…¬å‘Šï¼ˆAPI å˜æ›´ï¼‰

### å‘¨åº¦æ£€æŸ¥æ¸…å•

- [ ] å®¡æŸ¥æœ¬å‘¨é£é™©äº‹ä»¶
- [ ] æ›´æ–°é£é™©è¯„çº§
- [ ] æ£€æŸ¥ç³»ç»Ÿèµ„æºè¶‹åŠ¿
- [ ] å®¡æŸ¥äº¤æ˜“æ€§èƒ½æŠ¥å‘Š
- [ ] æ›´æ–°åº”æ€¥é¢„æ¡ˆ
- [ ] å¤‡ä»½é…ç½®å’Œä»£ç 

---

**æ–‡æ¡£ç»´æŠ¤è€…**: é£é™©ç®¡ç†å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-11-23
**ä¸‹æ¬¡å®¡é˜…**: æ¯æœˆ 1 æ—¥
**ç´§æ€¥è”ç³»**: emergency@k-arb.com
